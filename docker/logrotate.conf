# Cipher MCP Log Rotation Configuration
# Rotates logs daily, keeps 7 days of history
#
# Note: Uses copytruncate to avoid need for application restart
# Compressed logs: cipher-mcp-20250930.log.gz

/app/data/logs/cipher-mcp*.log {
    # Rotate daily
    daily

    # Keep 7 days of logs
    rotate 7

    # Compress old logs with gzip
    compress

    # Delay compression until next rotation (keeps most recent backup uncompressed)
    delaycompress

    # Don't error if log file is missing
    missingok

    # Don't rotate if log is empty
    notifempty

    # Copy and truncate instead of moving (avoids breaking open file handles)
    copytruncate

    # Add date suffix to rotated files
    dateext
    dateformat -%Y%m%d

    # Set permissions on rotated files
    create 0644 node cipher
}